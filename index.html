<!DOCTYPE html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="css/jspice.css" type="text/css">
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="js/jspice.js"></script>
  <script>

    $(document).ready(function(){
	var parameters={
	    server_fqdn:"urania.udea.edu.co",
	    proxy_fqdn:"urania.udea.edu.co",
	    kerneltype:"unique"
	}
	
	jspice.init(parameters).done(function(d,t,e){
	    jspice.log(["Initialization:",d]);
	}).done(function(){
	    var code="et=spy.str2et('01/01/2016 00:00:00')";
	    execCode(code);
	});
    });

    function execCode(code){

	var parameters={
	    url:jspice.proxy_cgi,
	    data:{sessionid:jspice.sessionid,
		  server:jspice.server,
		  port:jspice.port,
		  code:code
		 },
	    type:"POST"
	};
	
	handler=jspice.run(parameters);
	handler.done(function(d,t,e){
	    $('#results').html(d.response);
	    $('#history').html($('#history').html()+"\n"+code);
	    $('#input').val('');
	    jspice.healthCheck(false);
	});

    }
  </script>
</head>

<body>
  <template id="code1">
    a=1;
  </template>

  <center>
    <h1>
      jSpice Test
    </h1>
    <h2 id="sessionid"></h2>

    <button onclick="jspice.startKernel()">Start kernel</button>
    <button onclick="jspice.stopKernel()">Stop kernel</button>
  </center>

  <p>
    Command:<input id="input" type="text" name="command" value="" onchange="execCode($(this).val())" size=100>
  </p>

  <p>
    History:
    <pre id="history" style="border:solid black 1px;padding:20px"></pre>
    Results:
    <div id="results" style="border:solid black 1px;padding:20px"></div>
  </p>
  <script>
    $(document).ready(function(){
    });
  </script>
</body>

</html>
